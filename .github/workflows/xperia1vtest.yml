name: Sony SM8550 GKI Kernel Build (5.15) - Android 14
permissions:
  contents: write
  actions: write
on:
  workflow_dispatch:
    inputs:
      kernelsu_variant:
        description: 'KernelSU Variant'
        required: true
        type: choice
        options:
          - 'Official'
          - 'Next'
          - 'MKSU'
          - 'SukiSU'
        default: 'Official'
      kernelsu_branch:
        description: 'KernelSU Branch'
        required: true
        type: choice
        options:
          - 'Stable(标准)'
          - 'Dev(开发)'
        default: 'Stable(标准)'
      use_susfs:
        description: 'Enable SUSFS'
        required: true
        type: boolean
        default: true
      use_zram:
        description: 'Enable ZRAM optimizations'
        required: true
        type: boolean
        default: true
      use_kpm:
        description: 'Enable KPM patches'
        required: true
        type: boolean
        default: true
      build_modules:
        description: 'Build device modules'
        required: true
        type: boolean
        default: false
      custom_version:
        description: 'Custom version string (optional)'
        required: false
        type: string
jobs:
  build-sony-kernel:
    runs-on: ubuntu-latest
    env:
      KERNEL_VERSION: "5.15"
      KERNEL_SUBLEVEL: "185"
      ANDROID_VERSION: "android14"
      OS_PATCH_LEVEL: "2025-08"
      CONFIG: "sony-sm8550-5.15"
      CCACHE_COMPILERCHECK: "%compiler% -dumpmachine; %compiler% -dumpversion"
      CCACHE_NOHASHDIR: "true"
      CCACHE_HARDLINK: "true"
      KCFLAGS: "-Wframe-larger-than=9999"
      KCPPFLAGS: "-Wframe-larger-than=9999"
    steps:
      - name: Maximize Build Space
        uses: AdityaGarg8/remove-unwanted-software@v5
        with:
          remove-dotnet: 'true'
          remove-android: 'true'
          remove-haskell: 'true'
          remove-codeql: 'true'
          remove-docker-images: 'true'
          remove-large-packages: 'true'
          remove-swapfile: 'true'
          verbose: 'true'

      - name: Setup Build Environment
        run: |
          sudo apt update && sudo apt upgrade -y
          sudo apt install -y \
            bc bison build-essential ccache curl flex g++-multilib \
            gcc-multilib git gnupg gperf imagemagick lib32readline-dev \
            lib32z1-dev liblz4-tool libncurses5-dev libsdl1.2-dev \
            libssl-dev libxml2 libxml2-utils lzop pngcrush rsync \
            schedtool squashfs-tools xsltproc zip zlib1g-dev \
            python3 python3-pip clang lld libelf-dev pahole lz4

      - name: Configure ccache
        run: |
          mkdir -p ~/.ccache
          ccache --version
          ccache --max-size=5G
          ccache --set-config=compression=true
          echo "CCACHE_DIR=$HOME/.ccache" >> $GITHUB_ENV

      - name: Restore ccache
        uses: actions/cache@v4
        with:
          path: ~/.ccache
          key: sony-sm8550-5.15-ccache-${{ github.sha }}
          restore-keys: |
            sony-sm8550-5.15-ccache-

      - name: Clone Toolchains and Build Tools (Android 14 style)
        run: |
          AOSP_MIRROR=https://android.googlesource.com
          BRANCH=main-kernel-build-2024

          git clone $AOSP_MIRROR/kernel/prebuilts/build-tools -b $BRANCH --depth 1 kernel-build-tools
          git clone $AOSP_MIRROR/platform/system/tools/mkbootimg -b $BRANCH --depth 1 mkbootimg

          # Clang prebuilts used by your builds (adjust branch if needed)
          git clone https://gitlab.com/ThankYouMario/android_prebuilts_clang-standalone -b 17 --depth=1 clang

      - name: Set Environment Variables
        run: |
          echo "AVBTOOL=$GITHUB_WORKSPACE/kernel-build-tools/linux-x86/bin/avbtool" >> $GITHUB_ENV
          echo "MKBOOTIMG=$GITHUB_WORKSPACE/mkbootimg/mkbootimg.py" >> $GITHUB_ENV
          echo "UNPACK_BOOTIMG=$GITHUB_WORKSPACE/mkbootimg/unpack_bootimg.py" >> $GITHUB_ENV
          echo "CLANG_PATH=$GITHUB_WORKSPACE/clang/bin" >> $GITHUB_ENV

      - name: Clone Kernel and Dependencies
        run: |
          git clone https://github.com/LineageOS/android_kernel_sony_sm8550.git \
            -b lineage-22.2 --depth=1 kernel

          if [ "${{ inputs.build_modules }}" = "true" ]; then
            git clone https://github.com/LineageOS/android_kernel_sony_sm8550-modules.git --depth=1 modules || true
          fi

          git clone https://github.com/WildPlusKernel/AnyKernel3.git -b gki-2.0 AnyKernel3 || git clone https://github.com/osm0sis/AnyKernel3.git -b master AnyKernel3

          # SUSFS Android 14 branch
          git clone https://github.com/ShirkNeko/susfs4ksu.git -b gki-android14-5.15 susfs4ksu || true

          git clone https://github.com/Tools-cx-app/kernel_patches.git || true
          git clone https://github.com/ShirkNeko/SukiSU_patch.git || true

      - name: Setup KernelSU
        run: |
          cd kernel

          case "${{ inputs.kernelsu_branch }}" in
            "Stable(标准)")
              BRANCH="-s susfs-main"
              ;;
            "Dev(开发)")
              case "${{ inputs.kernelsu_variant }}" in
                "Official" | "MKSU") BRANCH="-s main" ;;
                "Next") BRANCH="-s next-susfs-dev" ;;
                "SukiSU") BRANCH="-s susfs-test" ;;
                *) echo "Error: Undefined variant"; exit 1 ;;
              esac
              ;;
          esac

          case "${{ inputs.kernelsu_variant }}" in
            "Official")
              curl -LSs "https://raw.githubusercontent.com/tiann/KernelSU/main/kernel/setup.sh" | bash $BRANCH || true
              ;;
            "Next")
              curl -LSs "https://raw.githubusercontent.com/rifsxd/KernelSU-Next/next-susfs/kernel/setup.sh" | bash $BRANCH || true
              ;;
            "MKSU")
              curl -LSs "https://raw.githubusercontent.com/5ec1cff/KernelSU/main/kernel/setup.sh" | bash $BRANCH || true
              ;;
            "SukiSU")
              curl -LSs "https://raw.githubusercontent.com/SukiSU-Ultra/SukiSU-Ultra/main/kernel/setup.sh" | bash $BRANCH || true
              ;;
          esac

      - name: Apply SUSFS Patches (Android 14 branch)
        if: ${{ inputs.use_susfs }}
        run: |
          cd kernel || exit 0
          echo "Applying SUSFS patches for Android 14 - 5.15..."

          # copy patch if available (prefer Android14-specific)
          if [ -f ../susfs4ksu/kernel_patches/50_add_susfs_in_gki-android14-5.15.patch ]; then
            cp ../susfs4ksu/kernel_patches/50_add_susfs_in_gki-android14-5.15.patch . || true
          elif [ -f ../susfs4ksu/kernel_patches/50_add_susfs_in_gki-android13-5.15.patch ]; then
            cp ../susfs4ksu/kernel_patches/50_add_susfs_in_gki-android13-5.15.patch . || true
          fi

          cp -r ../susfs4ksu/kernel_patches/fs/* ./fs/ || true
          cp -r ../susfs4ksu/kernel_patches/include/linux/* ./include/linux/ || true

          if [ "${{ inputs.kernelsu_variant }}" == "Official" ]; then
            if [ -d ./KernelSU ]; then
              cp ../../susfs4ksu/kernel_patches/KernelSU/10_enable_susfs_for_ksu.patch ./KernelSU/ || true
              cd KernelSU || true
              patch -p1 --forward --fuzz=3 < 10_enable_susfs_for_ksu.patch || true
              cd ..
            fi
          elif [ "${{ inputs.kernelsu_variant }}" == "MKSU" ]; then
            if [ -d ./KernelSU ]; then
              cp ../../susfs4ksu/kernel_patches/KernelSU/10_enable_susfs_for_ksu.patch ./KernelSU/ || true
              cd KernelSU || true
              patch -p1 --forward --fuzz=3 < 10_enable_susfs_for_ksu.patch || true
              cd ..
            fi
            if [ -f ../kernel_patches/mksu/mksu_susfs.patch ]; then
              cp ../kernel_patches/mksu/mksu_susfs.patch .
              patch -p1 < mksu_susfs.patch || true
            fi
          fi

          if [ -f 50_add_susfs_in_gki-android14-5.15.patch ]; then
            patch -p1 --fuzz=3 < 50_add_susfs_in_gki-android14-5.15.patch || true
          elif [ -f 50_add_susfs_in_gki-android13-5.15.patch ]; then
            patch -p1 --fuzz=3 < 50_add_susfs_in_gki-android13-5.15.patch || true
          fi

          if [ $KERNEL_SUBLEVEL -lt 123 ]; then
            echo 'Applying 5.15 legacy fix...'
            curl -LSs https://github.com/zzh20188/GKI_KernelSU_SUSFS/raw/refs/heads/legacy/fix_5.15.legacy -o fix_5.15.legacy.patch || true
            patch -p1 < fix_5.15.legacy.patch || true
          fi

      - name: Apply Additional Patches
        run: |
          cd kernel || exit 0

          if [ "${{ inputs.kernelsu_variant }}" == "Next" ]; then
            cp ../kernel_patches/next/scope_min_manual_hooks_v1.4.patch . || true
            patch -p1 -F 3 < scope_min_manual_hooks_v1.4.patch || true
          elif [ "${{ inputs.kernelsu_variant }}" == "SukiSU" ]; then
            cp ../SukiSU_patch/hooks/syscall_hooks.patch . || true
            patch -p1 -F 3 < syscall_hooks.patch || true
          fi

          if [ -f ../kernel_patches/69_hide_stuff.patch ]; then
            cp ../kernel_patches/69_hide_stuff.patch . || true
            patch -p1 -F 3 < 69_hide_stuff.patch || true
          fi

      - name: Apply ZRAM Optimizations (Android14-aware)
        if: ${{ inputs.use_zram }}
        run: |
          cd kernel || exit 0

          if [ -d ../SukiSU_patch/other/zram/lz4k/include/linux ]; then
            cp -r ../SukiSU_patch/other/zram/lz4k/include/linux/* ./include/linux/ || true
            cp -r ../SukiSU_patch/other/zram/lz4k/lib/* ./lib/ || true
            cp -r ../SukiSU_patch/other/zram/lz4k/crypto/* ./crypto/ || true
            cp -r ../SukiSU_patch/other/zram/lz4k_oplus ./lib/ || true
          fi

          if [ -f "../SukiSU_patch/other/zram/zram_patch/5.15/lz4kd.patch" ]; then
            cp ../SukiSU_patch/other/zram/zram_patch/5.15/lz4kd.patch . || true
            patch -p1 -F 3 < lz4kd.patch || true
          fi

          if [ -f "../SukiSU_patch/other/zram/zram_patch/5.15/lz4k_oplus.patch" ]; then
            cp ../SukiSU_patch/other/zram/zram_patch/5.15/lz4k_oplus.patch . || true
            patch -p1 -F 3 < lz4k_oplus.patch || true
          fi

          # Android14-specific: if modules.bzl exists in repo layout, remove zram entries to avoid Bazel issues
          if [ -f "../kernel_patches/modules.bzl" ]; then
            sed -i 's/"drivers\/block\/zram\/zram\.ko",//g; s/"mm\/zsmalloc\.ko",//g' ../kernel_patches/modules.bzl || true
          fi

          # If gki_defconfig exists in common layout, ensure MODULE_SIG_FORCE=False to allow unsigned modules building
          if [ -f "arch/arm64/configs/gki_defconfig" ]; then
            echo "CONFIG_MODULE_SIG_FORCE=n" >> arch/arm64/configs/gki_defconfig || true
          fi
          if [ -f "../common/arch/arm64/configs/gki_defconfig" ]; then
            echo "CONFIG_MODULE_SIG_FORCE=n" >> ../common/arch/arm64/configs/gki_defconfig || true
          fi

      - name: Configure Kernel (gki_defconfig + SUSFS options)
        run: |
          cd kernel || exit 0

          # Determine defconfig path safely
          if [ -f arch/arm64/configs/gki_defconfig ]; then
            DEFCONFIG_PATH=arch/arm64/configs/gki_defconfig
          elif [ -f ../common/arch/arm64/configs/gki_defconfig ]; then
            DEFCONFIG_PATH=../common/arch/arm64/configs/gki_defconfig
          else
            DEFCONFIG_PATH=arch/arm64/configs/gki_defconfig
            mkdir -p $(dirname $DEFCONFIG_PATH) || true
            touch $DEFCONFIG_PATH || true
          fi

          echo "Using defconfig path: $DEFCONFIG_PATH"

          # Try regenerating gki_defconfig (no-op if missing scripts)
          if command -v make >/dev/null 2>&1; then
            make ARCH=arm64 gki_defconfig || true
          fi

          # Ensure kernel SU base
          echo "CONFIG_KSU=y" >> "$DEFCONFIG_PATH" || true

          if [ "${{ inputs.kernelsu_variant }}" == "Next" ]; then
            echo "CONFIG_KSU_KPROBES_HOOK=n" >> "$DEFCONFIG_PATH" || true
            echo "CONFIG_KSU_SUSFS_SUS_SU=n" >> "$DEFCONFIG_PATH" || true
          elif [ "${{ inputs.kernelsu_variant }}" == "SukiSU" ]; then
            echo "CONFIG_KPM=y" >> "$DEFCONFIG_PATH" || true
            echo "CONFIG_KSU_SUSFS_SUS_SU=n" >> "$DEFCONFIG_PATH" || true
            echo "CONFIG_KSU_MANUAL_HOOK=y" >> "$DEFCONFIG_PATH" || true
          elif [ "${{ inputs.kernelsu_variant }}" == "MKSU" ]; then
            echo "CONFIG_KSU_SUSFS_SUS_SU=n" >> "$DEFCONFIG_PATH" || true
          fi

          # Append SUSFS configs via a quoted heredoc so YAML parser stays happy
          if [ "${{ inputs.use_susfs }}" = "true" ]; then
cat >> "$DEFCONFIG_PATH" <<'GKI_SUSFS_EOF'
CONFIG_KSU_SUSFS=y
CONFIG_KSU_SUSFS_HAS_MAGIC_MOUNT=y
CONFIG_KSU_SUSFS_SUS_PATH=y
CONFIG_KSU_SUSFS_SUS_MOUNT=y
CONFIG_KSU_SUSFS_AUTO_ADD_SUS_KSU_DEFAULT_MOUNT=y
CONFIG_KSU_SUSFS_AUTO_ADD_SUS_BIND_MOUNT=y
CONFIG_KSU_SUSFS_SUS_KSTAT=y
CONFIG_KSU_SUSFS_SUS_OVERLAYFS=n
CONFIG_KSU_SUSFS_TRY_UMOUNT=y
CONFIG_KSU_SUSFS_AUTO_ADD_TRY_UMOUNT_FOR_BIND_MOUNT=y
CONFIG_KSU_SUSFS_SPOOF_UNAME=y
CONFIG_KSU_SUSFS_ENABLE_LOG=y
CONFIG_KSU_SUSFS_HIDE_KSU_SUSFS_SYMBOLS=y
CONFIG_KSU_SUSFS_SPOOF_CMDLINE_OR_BOOTCONFIG=y
CONFIG_KSU_SUSFS_OPEN_REDIRECT=y
GKI_SUSFS_EOF
          fi

          # Append misc kernel options
cat >> "$DEFCONFIG_PATH" <<'GKI_MISC_EOF'
CONFIG_TMPFS_XATTR=y
CONFIG_TMPFS_POSIX_ACL=y
CONFIG_IP_NF_TARGET_TTL=y
CONFIG_IP6_NF_TARGET_HL=y
CONFIG_IP6_NF_MATCH_HL=y
CONFIG_TCP_CONG_ADVANCED=y
CONFIG_TCP_CONG_BBR=y
CONFIG_NET_SCH_FQ=y
CONFIG_TCP_CONG_BIC=n
CONFIG_TCP_CONG_WESTWOOD=n
CONFIG_TCP_CONG_HTCP=n
GKI_MISC_EOF

          if [ "${{ inputs.use_zram }}" = "true" ]; then
cat >> "$DEFCONFIG_PATH" <<'GKI_ZRAM_EOF'
CONFIG_ZSMALLOC=y
CONFIG_ZRAM=y
CONFIG_CRYPTO_LZO=y
CONFIG_CRYPTO_LZ4HC=y
CONFIG_CRYPTO_LZ4K=y
CONFIG_CRYPTO_LZ4KD=y
CONFIG_CRYPTO_842=y
CONFIG_CRYPTO_LZ4K_OPLUS=y
CONFIG_ZRAM_WRITEBACK=y
CONFIG_ZRAM_DEF_COMP_LZ4KD=y
GKI_ZRAM_EOF
          fi

          # Custom localversion
          if [ ! -z "${{ inputs.custom_version }}" ]; then
            sed -i "/^CONFIG_LOCALVERSION=/c\CONFIG_LOCALVERSION=\"-${{ inputs.custom_version }}\"" "$DEFCONFIG_PATH" || true
          else
            sed -i "/^CONFIG_LOCALVERSION=/c\CONFIG_LOCALVERSION=\"-Sony-SM8550-KSU\"" "$DEFCONFIG_PATH" || true
          fi

          if command -v make >/dev/null 2>&1; then
            make ARCH=arm64 gki_defconfig || true
          fi

      - name: Build Kernel
        run: |
          cd kernel || exit 0

          export ARCH=arm64
          export SUBARCH=arm64
          export PATH=$CLANG_PATH:$PATH
          export CROSS_COMPILE=aarch64-linux-gnu-
          export CROSS_COMPILE_ARM32=arm-linux-gnueabi-
          export CC="ccache clang"
          export CXX="ccache clang++"
          export LD=ld.lld
          export AR=llvm-ar
          export NM=llvm-nm
          export OBJCOPY=llvm-objcopy
          export OBJDUMP=llvm-objdump
          export STRIP=llvm-strip

          export KCFLAGS="-Wframe-larger-than=9999"
          export KCPPFLAGS="-Wframe-larger-than=9999"

          make -j$(nproc) \
            ARCH=arm64 \
            CC="ccache clang" \
            LLVM=1 \
            LLVM_IAS=1 \
            KCFLAGS="-Wframe-larger-than=9999" \
            KCPPFLAGS="-Wframe-larger-than=9999" \
            Image Image.gz dtbs || true

          ccache --show-stats || true

      - name: Patch Image for KPM (SukiSU only)
        if: ${{ inputs.use_kpm && inputs.kernelsu_variant == 'SukiSU' }}
        run: |
          cd kernel/arch/arm64/boot || exit 0
          if curl -LSs "https://raw.githubusercontent.com/ShirkNeko/SukiSU_patch/refs/heads/main/kpm/patch_linux" -o patch; then
            chmod +x patch || true
            ./patch || true
            rm -rf Image || true
            mv oImage Image || true
            gzip -n -k -f -9 ./Image > ./Image.gz || true
          fi

      - name: Build Modules
        if: ${{ inputs.build_modules }}
        run: |
          cd kernel || exit 0
          export ARCH=arm64
          export PATH=$CLANG_PATH:$PATH
          export CC="ccache clang"
          export LLVM=1
          export LLVM_IAS=1
          export KCFLAGS="-Wframe-larger-than=9999"
          export KCPPFLAGS="-Wframe-larger-than=9999"

          make -j$(nproc) modules || true
          make INSTALL_MOD_PATH=../modules_out modules_install || true
          find ../modules_out -name "*.ko" -exec $STRIP --strip-debug {} \; || true

      - name: Create Boot Images (Android 14 aware)
        run: |
          cd kernel/arch/arm64/boot || exit 0

          if [ ! -f Image.gz ]; then
            gzip -n -k -f -9 ./Image > ./Image.gz || true
          fi

          if [ ! -f Image.lz4 ]; then
            lz4 -f -12 --favor-decSpeed ./Image ./Image.lz4 || true
          fi

          echo "Creating boot images for Android 14..."

          $MKBOOTIMG \
            --header_version 4 \
            --kernel Image \
            --output boot.img \
            --os_version 14.0.0 \
            --os_patch_level $OS_PATCH_LEVEL || true

          $MKBOOTIMG \
            --header_version 4 \
            --kernel Image.gz \
            --output boot-gz.img \
            --os_version 14.0.0 \
            --os_patch_level $OS_PATCH_LEVEL || true

          $MKBOOTIMG \
            --header_version 4 \
            --kernel Image.lz4 \
            --output boot-lz4.img \
            --os_version 14.0.0 \
            --os_patch_level $OS_PATCH_LEVEL || true

          if [ -f "$AVBTOOL" ]; then
            for img in boot.img boot-gz.img boot-lz4.img; do
              $AVBTOOL add_hash_footer \
                --partition_name boot \
                --partition_size $((64 * 1024 * 1024)) \
                --image $img \
                --algorithm SHA256_RSA2048 || true
            done
          fi

          mv *.img $GITHUB_WORKSPACE/ || true

      - name: Package with AnyKernel3
        run: |
          cp kernel/arch/arm64/boot/Image AnyKernel3/ || true
          cp kernel/arch/arm64/boot/Image.gz AnyKernel3/ || true
          cp kernel/arch/arm64/boot/Image.lz4 AnyKernel3/ 2>/dev/null || true

          mkdir -p AnyKernel3/dtbs || true
          find kernel/arch/arm64/boot/dts -name "*.dtb" -exec cp {} AnyKernel3/dtbs/ \; 2>/dev/null || true

          if [ "${{ inputs.build_modules }}" = "true" ] && [ -d "modules_out" ]; then
            mkdir -p AnyKernel3/modules/system/lib/modules || true
            find modules_out -name "*.ko" -exec cp {} AnyKernel3/modules/system/lib/modules/ \;
          fi

          cat > AnyKernel3/anykernel.sh << 'AK_EOF'
# AnyKernel3 Ramdisk Mod Script - adapted for Android14
properties() { '
kernel.string=Sony SM8550 KernelSU + SUSFS Kernel by @YourName
do.devicecheck=1
do.modules=1
do.systemless=1
do.cleanup=1
do.cleanuponabort=0
device.name1=pdx234
device.name2=pdx237
device.name3=yodo
device.name4=sm8550
supported.versions=14
supported.patchlevels=
'; }

block=/dev/block/bootdevice/by-name/boot;
is_slot_device=1;
ramdisk_compression=auto;
patch_vbmeta_flag=auto;

. tools/ak3-core.sh;

dump_boot;

if [ -d "$home/modules" ]; then
  ui_print "- Installing kernel modules...";
  mount -o rw,remount /system;
  cp -rf $home/modules/* /;
  mount -o ro,remount /system;
fi;

write_boot;
AK_EOF

          cd AnyKernel3 || true
          zip -r9 ../Sony-SM8550-${{ env.KERNEL_VERSION }}.${{ env.KERNEL_SUBLEVEL }}-${{ inputs.kernelsu_variant }}-$(date +%Y%m%d).zip * -x .git README.md *placeholder Image.gz Image.lz4 || true
          rm -f Image || true
          zip -r9 ../Sony-SM8550-${{ env.KERNEL_VERSION }}.${{ env.KERNEL_SUBLEVEL }}-${{ inputs.kernelsu_variant }}-gz-$(date +%Y%m%d).zip * -x .git README.md *placeholder Image Image.lz4 || true
          if [ -f Image.lz4 ]; then
            rm -f Image.gz || true
            zip -r9 ../Sony-SM8550-${{ env.KERNEL_VERSION }}.${{ env.KERNEL_SUBLEVEL }}-${{ inputs.kernelsu_variant }}-lz4-$(date +%Y%m%d).zip * -x .git README.md *placeholder Image Image.gz || true
          fi

      - name: Upload Artifacts
        uses: actions/upload-artifact@v4
        with:
          name: Sony-SM8550-KernelSU-${{ inputs.kernelsu_variant }}-${{ github.run_number }}
          path: |
            *.zip
            *.img
            kernel/arch/arm64/boot/Image
            kernel/arch/arm64/boot/Image.gz
            kernel/arch/arm64/boot/Image.lz4

      - name: Create Release
        if: github.event_name != 'pull_request'
        uses: softprops/action-gh-release@v1
        with:
          tag_name: v${{ env.KERNEL_VERSION }}.${{ env.KERNEL_SUBLEVEL }}-${{ inputs.kernelsu_variant }}-${{ github.run_number }}
          name: Sony SM8550 Kernel ${{ env.KERNEL_VERSION }}.${{ env.KERNEL_SUBLEVEL }} - ${{ inputs.kernelsu_variant }}
          body: |
            ## Sony SM8550 Custom Kernel

            **Kernel Version:** ${{ env.KERNEL_VERSION }}.${{ env.KERNEL_SUBLEVEL }}
            **Android Version:** Android 14
            **KernelSU Variant:** ${{ inputs.kernelsu_variant }}
            **SUSFS:** ${{ inputs.use_susfs && 'Enabled' || 'Disabled' }}
            **ZRAM Optimizations:** ${{ inputs.use_zram && 'Enabled' || 'Disabled' }}
          files: |
            *.zip
            boot*.img
          draft: false
          prerelease: false
